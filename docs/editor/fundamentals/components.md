---
title: "组件 (Components) (原嵌套画板)"
description: "组件通过可重用的画板和动画简化您的工作流程。对源组件所做的更改将反映在所有实例中。"
---

## 创建组件

任何画板都可以转换为组件。要执行此操作，在舞台上选择一个画板，并使用检查器中的组件图标来切换其状态。

或者，您可以在选中画板的情况下使用 `Shift` + `N` 快捷键。如果您习惯使用 Figma，那么 `Cmd/Ctrl` + `Alt/Option` + `K` 快捷键也同样有效。

再次点击检查器中的组件切换按钮，或者使用 `Shift` + `Alt/Option` + `N` 快捷键，即可将选择恢复为普通画板。

目前，只有被标记为"组件"的画板才会被导出到您的 `.riv` 文件中。如果您认为将来需要在运行时通过编程方式访问某个画板，则应将其标记为组件。关于特定导出行为的更多选项即将推出。

## 使用组件

使用"组件工具"（原称嵌套画板工具）在舞台上选择并放置组件实例。从工具栏中选择该工具或使用快捷键 **N** 即可启用它。

在舞台上的任意位置点击，将组件放置在所需位置。此时将显示一个菜单，列出文件中所有可实例化的组件。如果没有显示任何内容，可能是因为您的文件中没有任何画板被标记为组件。

![Image](/images/editor/fundamentals/components-add.gif)

或者，点击工具栏图标右侧的下拉菜单，预先选择好组件。该菜单内容受资产（Assets）选项卡的排序模式影响——"自定义"（Custom）模式将按照资产面板中的组织方式呈现组件，而"来源/类型"（Source/Type）模式将按来源呈现组件。后者在配合我们的资源库（Libraries）功能时会非常有用。

## 配置组件实例

添加组件实例后，选择一个时间轴或状态机进行播放。

### 状态机 (State Machines)

分配实例后，默认状态机会显示在检查器中。

![Image](/images/editor/fundamentals/components-statemachine.gif)

如果您公开（Expose）了任何输入（Inputs），您可以通过（选中动画时的）选项菜单或（选中状态机时的）输入面板来访问它们。

![Image](/images/editor/fundamentals/components-nested_inputs.gif)

### 添加动画

您可以播放与组件关联的任何动画。您需要使用检查器中的加号按钮将所需的动画添加到实例中。

![Image](/images/editor/fundamentals/components-animations.gif)

这些动画可以单独使用，与状态机混合使用，或者与其他动画分层使用。

请注意，在添加动画之前，您必须选择它是"简单动画"（Simple）还是"重映射动画"（Remap）。

#### 简单解析 (Simple)

简单动画是播放组件时间轴的一种简便方法。

![Image](/images/editor/fundamentals/components-animation-simple.gif)

简单动画允许您在主时间轴上为其起点设置关键帧。您还可以选择更改动画的播放速度。

#### 重映射 (Remap)

重映射动画允许您在主时间轴上为动画的时间值设置关键帧。这让您可以拉伸、缩短甚至反向播放动画。

![Image](/images/editor/fundamentals/components-animation-remap.gif)

请注意，时间值以百分比表示，0% 代表时间轴的起点，100% 代表终点。

### 混合值 (Mix Value)

当您向一个组件添加多个动画时，动画开始混合在一起。这种混合非常重要，特别是当多个动画共享关键帧属性时。如果不调整此值，您的组件可能无法按预期方式播放动画。

默认情况下，添加到组件的任何动画其初始混合值均为 100%。您可以在设计模式下调整此值，或者在特定动画中通过设置关键帧来调整。**请注意，混合值非零的动画将始终与其他动画混合，无论它是否设置了播放关键帧。**

为了确保播放正确的动画，请确保将目标动画的混合值设为 100%，并将所有其它动画的混合值设为 0%。

## 实例模式 (Instance Modes)

组件实例可以设置为使用 3 种模式之一，这些模式将根据其内容和使用环境表现出不同的行为。"叶子"（Leaf）模式和"布局"（Layout）模式通常在父画板需要对其内容进行响应式布局时使用。

### 节点 (Node)

这是默认模式，用于非响应式场景。其内容将始终根据缩放（Scale）属性进行缩放。

### 叶子 (Leaf)

![Image](/images/editor/fundamentals/components-leaf.png)

"叶子"模式会导致组件始终相对于其所在的布局（Layout）或画板进行定位和调整大小。如果组件包含需要随容器大小调整但其自身不包含布局（Layout）的元素，此模式非常有用。

#### 叶子拟合 (Leaf Fit)

"拟合"（Fit）类型决定了组件叶子在其分配区域内如何缩放。

- **填充 (Fill) (默认)：** 内容将填充整个可用视图。如果纵横比不一致，Rive 内容将被拉伸。
- **包含 (Contain)：** 内容将包含在视图内，且保持纵横比。如果纵横比不一致，则视图的一部分将留白。
- **覆盖 (Cover)：** Rive 内容将覆盖整个视图，且保持纵横比。如果内容纵横比与视图不一致，则内容将被剪裁。
- **等宽 (Fit Width)：** 内容将填充至视图的宽度。这可能导致剪裁或视图空间留白。
- **等高 (Fit Height)：** 内容将填充至视图的高度。这可能导致剪裁或视图空间留白。
- **无 (None)：** 内容按其画板原始大小渲染，可能导致剪裁或视图空间留白。
- **缩小以适应 (Scale Down)：** 内容缩小至视图大小，且保持纵横比。当内容大于画布时，这等同于"包含"模式。如果画布大于内容，则不会放大。

#### 叶子对齐 (Leaf Alignment)

"对齐"类型决定了内容在分配区域内如何对齐。对齐采用 3x3 网格形式设定：**居中 (预设)**、**左下**、**底部居中**、**右下**、**左侧居中**、**右侧居中**、**左上**、**顶部居中**、**右上**。

#### 叶子对齐位置 X/Y

"叶子对齐位置"是对齐方式的数值化表示，可用于 9 种预设对齐方案不满足需求的情况。数值表示如下：X = -1 (左)，0 (中)，1 (右)；Y = -1 (上)，0 (中)，1 (下)。也可以使用非整数值来实现精确对齐，例如 X = 0.5 将使内容定位在居中和靠右之间的中间位置。

### 布局 (Layout)

![Image](/images/editor/fundamentals/components-layout.png)

当组件包含需要随父级大小变化而保持响应式的"布局"（Layout）时，请使用"布局"模式。这是唯一一种组件内容不被缩放的模式，而是通过画板大小的变化来重新排布组件内的内容。

#### 布局缩放类型 (Layout Scale Type)

- **固定 (Fixed)：** 为布局设定固定的宽度或高度。定义的值可以是像素（point）或百分比。使用字段内的单位切换按钮即可切换类型。
- **抱合 (Hug)：** 布局的宽度和/或高度会缩小以适应其子内容。如果您的组件包含需要根据内容确定大小的文本或其它对象，此功能非常有用。
- **填充 (Fill)：** 布局的宽度和/或高度会扩展，以填充父布局或画板内的可用空间。

#### 布局尺寸 (Layout Size)

当设置为"固定"时，组件的宽度和高度可以设置为像素值或百分比值。这与缩放（Scale）属性不同，后者是改变组件的整体缩放倍数。通常在选择"布局"模式时不应使用缩放属性。

## 公开输入和事件

将组件的输入（Inputs）和/或事件（Events）"公开"（Expose），以便从父级/宿主画板中控制它们。这允许您通过状态机让一个组件控制另一个组件。

### 如何公开输入

公开输入允许父画板访问并操纵它。具体操作是：选择目标输入，然后在检查器中勾选 "Expose to main artboard"（公开至主画板）选项。

![Image](https://ucarecdn.com/251b0247-ae05-4f58-8858-8e7a21abd816/)

创建组件后，您可以通过检查器的选项面板以及输入面板查看所有已公开的输入。

### 在父画板上使用输入

已公开的输入可以在输入面板或检查器中找到。您可以通过监听器、事件或在时间轴上设置关键帧来使用它们。

![Image](https://ucarecdn.com/ee1dd959-9fba-45c9-a74b-1173cd71e894/)

#### 通过监听器 (Listener)

创建监听器时，您会发现所有公开的输入都可以作为监听器的 "Set Input"（设置输入）属性。利用这个选项，您可以例如同时更改多个画板的布尔输入。

![Image](https://ucarecdn.com/2349fdd6-5a5a-434e-a1dc-3974e6f1e01c/)

#### 使用事件 (Events)

此外，我们可以使用监听器来侦听来自组件发出的事件，并据此更改输入。

![Image](https://ucarecdn.com/2b1ddae6-31c9-41be-969c-86a59b2206cd/)

要查看与画板关联的事件，您需要将该画板设置为监听器的目标（Target）。该事件现在将作为监听动作列在清单中。

#### 在状态机上记录关键帧

您可以通过检查器中的选项面板，在父画板的时间轴上为公开的输入设置关键帧。

这是一个非常方便的小技巧，例如当您想要设置某个实例内部的文本值时。