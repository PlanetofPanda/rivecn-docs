import{_ as e,c as a,o as r,ag as d}from"./chunks/framework.WXS6e2PS.js";const c=JSON.parse('{"title":"运行时大小 (Runtime Sizes)","description":"最后更新：2025 年 10 月","frontmatter":{"title":"运行时大小 (Runtime Sizes)","description":"最后更新：2025 年 10 月"},"headers":[],"relativePath":"runtimes/runtime-sizes.md","filePath":"runtimes/runtime-sizes.md"}'),i={name:"runtimes/runtime-sizes.md"};function o(n,t,l,h,p,s){return r(),a("div",null,[...t[0]||(t[0]=[d('<h3 id="web-js" tabindex="-1">Web (JS) <a class="header-anchor" href="#web-js" aria-label="Permalink to &quot;Web (JS)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>运行时 (Runtime)</th><th>未压缩 (Uncompressed)</th><th>压缩后 (Compressed)</th></tr></thead><tbody><tr><td>canvas-lite</td><td>550KB</td><td>175KB</td></tr><tr><td>canvas</td><td>1300KB</td><td>550KB</td></tr><tr><td>webgl2</td><td>1650KB</td><td>650KB</td></tr></tbody></table><h3 id="react" tabindex="-1">React <a class="header-anchor" href="#react" aria-label="Permalink to &quot;React&quot;">​</a></h3><p>参见 <code>Web (JS)</code> 了解更多详情。</p><h3 id="react-native" tabindex="-1">React Native <a class="header-anchor" href="#react-native" aria-label="Permalink to &quot;React Native&quot;">​</a></h3><p>参见 <code>Android</code> 和 <code>Apple</code> 了解更多详情。</p><h3 id="apple" tabindex="-1">Apple <a class="header-anchor" href="#apple" aria-label="Permalink to &quot;Apple&quot;">​</a></h3><table tabindex="0"><thead><tr><th>目标 (Target)</th><th>下载大小 (Download Size)</th><th>安装大小 (Install Size)</th></tr></thead><tbody><tr><td>Framework</td><td></td><td>3.8MB</td></tr><tr><td>iOS App + RiveRuntime</td><td>1.4MB</td><td>3.9MB</td></tr><tr><td>macOS App + RiveRuntime</td><td>1.4MB</td><td>4.0MB</td></tr></tbody></table><p><a href="https://www.emergetools.com/app/example/ios/rive.app.ios.runtime.RiveRuntime/release" target="_blank" rel="noreferrer"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fwww.emergetools.com%2Fapi%2Fv2%2Fpublic_new_build%3FexampleId%3Drive.app.ios.runtime.RiveRuntime%26platform%3Dios%26badgeOption%3Dversion_and_max_install_size%26buildType%3Drelease&amp;query=%24.badgeMetadata&amp;logo=apple&amp;label=RiveRuntime" alt="Emerge badge"></a></p><h3 id="android" tabindex="-1">Android <a class="header-anchor" href="#android" aria-label="Permalink to &quot;Android&quot;">​</a></h3><table tabindex="0"><thead><tr><th>目标 (Target)</th><th>下载大小 (Download Size)</th><th>安装大小 (Install Size)</th></tr></thead><tbody><tr><td>ARM-v8a</td><td>2.39MB</td><td>6.58MB</td></tr><tr><td>ARM-v7a</td><td>2.31MB</td><td>5.67MB</td></tr></tbody></table><h4 id="组件-components" tabindex="-1">组件 (Components) <a class="header-anchor" href="#组件-components" aria-label="Permalink to &quot;组件 (Components)&quot;">​</a></h4><p>Rive Android 的二进制大小由多个部分组成：</p><ul><li>编译为 DEX 文件的 Kotlin 代码</li><li>Rive Android 原生共享库 (<code>librive-android.so</code>) <ul><li>由 Rive Android C++ 绑定、Rive C++ 运行时和 Rive 渲染器组成。</li><li>此外还包含<a href="#第三方依赖项-third-party-dependencies">下述第三方静态依赖关系</a>（目前不包含 Luau）。</li></ul></li><li>C++ 标准库（共享 .so 文件 - ARM-v8a 的下载大小为 394KB，安装大小为 1.2MB）</li><li>以下 Android 依赖项：</li></ul><table tabindex="0"><thead><tr><th>依赖项 (Dependency)</th><th>原因 (Reason)</th></tr></thead><tbody><tr><td>Compose: runtime, ui, ui-android</td><td>Compose 支持</td></tr><tr><td>Lifecycle: runtime-ktx and runtime-compose</td><td>Compose 中的生命周期感知</td></tr><tr><td>Startup: startup-runtime</td><td>自动初始化</td></tr><tr><td>ReLinker</td><td>Rive 原生库加载</td></tr><tr><td>Volley</td><td>网络加载</td></tr></tbody></table><h4 id="摊销与-r8-amortization-and-r8" tabindex="-1">摊销与 R8 (Amortization and R8) <a class="header-anchor" href="#摊销与-r8-amortization-and-r8" aria-label="Permalink to &quot;摊销与 R8 (Amortization and R8)&quot;">​</a></h4><p>上述列出的尺寸反映了将 Rive 添加到原本为空的应用程序中时的情况。某些上述依赖项可能已经存在于您的应用程序中，因此添加 Rive 时不会增加体积。例如，如果您的应用已经使用了 Jetpack Compose，则 Compose 依赖项很可能已经包含在您的应用二进制文件中。</p><p>C++ 标准库也是如此，它将在所有具有原生代码的依赖项之间共享。</p><p>此外，在编译发布版本 (release build) 时，R8 将对您的应用程序进行缩减，删除未使用的代码和资源。这可以进一步减少将 Rive 添加到应用程序中所带来的尺寸影响。请确保您的 Gradle 文件包含 <a href="https://developer.android.com/topic/performance/app-optimization/enable-app-optimization" target="_blank" rel="noreferrer"><code>isMinifyEnabled = true</code></a>。</p><h4 id="未来计划-future-work" tabindex="-1">未来计划 (Future Work) <a class="header-anchor" href="#未来计划-future-work" aria-label="Permalink to &quot;未来计划 (Future Work)&quot;">​</a></h4><p>目前有一些减少库二进制大小的方案可在未来考虑，包括：</p><ul><li>使用 Oboe 代替 Miniaudio 来支持音频 <ul><li>目前可以通过使用 <code>-PnoAudio</code> Gradle 标志<a href="https://github.com/rive-app/rive-android#no-audio-engine" target="_blank" rel="noreferrer">自行编译 Rive Android</a> 来移除 Miniaudio。</li></ul></li><li>将运行时模块化，以便仅在需要时包含 Compose 支持，并将 Compose API 与旧版 API 分离开来。</li><li>将 Volley 设置为网络加载的可选依赖项。</li><li>更改 C++ 编译标志以优先考虑体积而非速度（需要进行性能测试）。</li></ul><h1 id="第三方依赖项-third-party-dependencies" tabindex="-1">第三方依赖项 (Third Party Dependencies) <a class="header-anchor" href="#第三方依赖项-third-party-dependencies" aria-label="Permalink to &quot;第三方依赖项 (Third Party Dependencies)&quot;">​</a></h1><p>通用的 Rive C++ 运行时包含多个开源第三方依赖项，这些依赖项贡献了其二进制大小。它们包括：</p><table tabindex="0"><thead><tr><th>依赖项 (Dependency)</th><th>原因 (Reason)</th></tr></thead><tbody><tr><td><a href="https://github.com/harfbuzz/harfbuzz" target="_blank" rel="noreferrer">HarfBuzz</a></td><td>文本渲染</td></tr><tr><td><a href="https://github.com/mackron/miniaudio" target="_blank" rel="noreferrer">Miniaudio</a></td><td>音频支持</td></tr><tr><td><a href="https://github.com/Tehreer/SheenBidi" target="_blank" rel="noreferrer">SheenBidi</a></td><td>双向文本支持</td></tr><tr><td><a href="https://github.com/facebook/yoga" target="_blank" rel="noreferrer">Yoga</a></td><td>布局</td></tr><tr><td><a href="https://github.com/luau-lang/luau" target="_blank" rel="noreferrer">Luau Interpreter</a></td><td>脚本支持</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Luau 目前未包含在大多数运行时中。一旦脚本功能普遍可用，预计运行时大小将相应增加。</p></div>',26)])])}const m=e(i,[["render",o]]);export{c as __pageData,m as default};
