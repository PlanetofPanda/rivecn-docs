import{_ as i,c as a,o as e,ag as n}from"./chunks/framework.WXS6e2PS.js";const k=JSON.parse('{"title":"从 1.x.x 迁移到 3.x.x","description":"迁移到 v3.x.x 的指南","frontmatter":{"title":"从 1.x.x 迁移到 3.x.x","description":"迁移到 v3.x.x 的指南"},"headers":[],"relativePath":"runtimes/react/migrating-from-v1-to-v3.md","filePath":"runtimes/react/migrating-from-v1-to-v3.md"}'),t={name:"runtimes/react/migrating-from-v1-to-v3.md"};function p(l,s,h,r,d,o){return e(),a("div",null,[...s[0]||(s[0]=[n(`<p>在大多数情况下，如果您使用的是 <code>rive-react</code> 的 v1.x.x 版本，您应该能够直接升级到 v3.x.x 中的新依赖项，而无需进行太多更改。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>注意</strong>：从 v2.x.x 迁移到 3.x.x 可以在您不进行任何更改的情况下安全完成。</p></div><h2 id="依赖关系变更-dependency-change" tabindex="-1">依赖关系变更 (Dependency Change) <a class="header-anchor" href="#依赖关系变更-dependency-change" aria-label="Permalink to &quot;依赖关系变更 (Dependency Change)&quot;">​</a></h2><p>在 v2.x.x 之前，您可以通过 <code>rive-react</code> 包在 React 中使用 Rive。该包是对 <code>@rive-app/webgl</code> 依赖项的封装。在 v2.x.x+ 版本中，我们通过两个主要的新 React 包，使 React 运行时能够同时封装 <code>@rive-app/webgl</code> 和 <code>@rive-app/canvas</code> 依赖项：</p><ul><li><strong>(推荐)</strong> <code>@rive-app/react-canvas</code></li><li><code>@rive-app/react-webgl</code></li></ul><p><code>rive-react</code> 包仍将与上述包同步定期发布，但它将上述两个 Web 运行时依赖项都设为了 <code>dependencies</code>，这可能会导致构建体积变大。因此，我们建议从 <code>rive-react</code> 切换到 <code>@rive-app/react-canvas</code>；如果您需要使用 WebGL 备份上下文，则切换到 WebGL 版本。</p><p><strong>升级前：</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rive-react</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>升级后：</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @rive-app/react-canvas</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>从 React 运行时导入的方式在 <code>rive-react</code> 和 <code>@rive-app/react-canvas</code> 之间没有任何变化。</p></div><h2 id="prop-穿透-prop-spreading" tabindex="-1">Prop 穿透 (Prop Spreading) <a class="header-anchor" href="#prop-穿透-prop-spreading" aria-label="Permalink to &quot;Prop 穿透 (Prop Spreading)&quot;">​</a></h2><p>无论您使用默认导出还是提供的 <code>useRive</code> hook，React 运行时都会提供一个 <code>RiveComponent</code>。该组件应被传递到 JSX 中以渲染画布。DOM 结构中包含一个包裹画布的 <code>div</code>，用于处理画布的样式和尺寸。以往传递给 <code>RiveComponent</code> 的大多数 prop 都会传递到该包裹 <code>&lt;div&gt;</code> 元素上。从 v2.x.x 开始，某些涉及样式的 prop（即 <code>className</code> 和 <code>style</code>）将继续传递到包裹 <code>&lt;div&gt;</code> 上，但所有其他 prop 现在都将传递到 <code>&lt;canvas&gt;</code> 元素上，以便您可以设置 <code>role</code>、<code>aria-*</code> 属性等。</p><p><strong>升级前：</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RiveComponent</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> aria-label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>将渲染出（简化后的）DOM：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> aria-label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>升级后：</strong></p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RiveComponent</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> aria-label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>现在将产生以下（简化后的）DOM：</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> aria-label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Label&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,21)])])}const g=i(t,[["render",p]]);export{k as __pageData,g as default};
