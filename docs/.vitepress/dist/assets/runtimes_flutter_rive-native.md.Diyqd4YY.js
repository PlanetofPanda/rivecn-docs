import{_ as i,c as t,o as a,ag as s}from"./chunks/framework.WXS6e2PS.js";const c=JSON.parse('{"title":"Flutter 版 Rive Native","description":"一个集成了 Rive 渲染器和核心 Rive C++ 运行时的 Flutter 插件。由 Rive Flutter 运行时使用。","frontmatter":{"title":"Flutter 版 Rive Native","description":"一个集成了 Rive 渲染器和核心 Rive C++ 运行时的 Flutter 插件。由 Rive Flutter 运行时使用。"},"headers":[],"relativePath":"runtimes/flutter/rive-native.md","filePath":"runtimes/flutter/rive-native.md"}'),r={name:"runtimes/flutter/rive-native.md"};function n(l,e,d,p,o,h){return a(),t("div",null,[...e[0]||(e[0]=[s(`<p>import NoteOnFeatureSupport from &quot;/snippets/runtimes/rendering-feature-support.mdx&quot;;</p><h2 id="rive-native-与-rive-rive-native-vs-rive" tabindex="-1">Rive Native 与 Rive (Rive Native vs Rive) <a class="header-anchor" href="#rive-native-与-rive-rive-native-vs-rive" aria-label="Permalink to &quot;Rive Native 与 Rive (Rive Native vs Rive)&quot;">​</a></h2><p><a href="https://pub.dev/packages/rive_native" target="_blank" rel="noreferrer">Rive Native</a> (<code>rive_native</code>) 是一个集成了 Rive 渲染器和核心 Rive C++ 运行时的 Flutter 插件。</p><p><a href="https://pub.dev/packages/rive" target="_blank" rel="noreferrer">Rive Flutter 运行时</a> (<code>rive</code>) 则构建在 <code>rive_native</code> 之上。我们建议将 <code>rive</code> 包作为依赖项引入，因为它会自动包含 <code>rive_native</code>，同时为在 Flutter 中使用 Rive 资源提供更友好的 API。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Rive Native 取代了 Rive Flutter 之前用于原生操作的 <a href="https://pub.dev/packages/rive_common" target="_blank" rel="noreferrer">Rive Common</a> (<code>rive_common</code>) 插件。</p></div><h3 id="理解-rive-native-understanding-rive-native" tabindex="-1">理解 Rive Native (Understanding Rive Native) <a class="header-anchor" href="#理解-rive-native-understanding-rive-native" aria-label="Permalink to &quot;理解 Rive Native (Understanding Rive Native)&quot;">​</a></h3><p>Rive Native 充当了 Flutter 与 Rive C++ 运行时之间的桥梁，让您能在 Flutter 应用中使用 Rive 图形。</p><ul><li><p><strong>C++ 运行时集成</strong>： <code>rive_native</code> 通过 FFI 构建在 Rive 的 <a href="https://github.com/rive-app/rive-runtime" target="_blank" rel="noreferrer">C++ 运行时</a> 之上。这确保了跨平台以及与 Rive 编辑器的一致体验，同时释放了 C++ 运行时独有的性能改进和新功能，例如：</p><ul><li><a href="/docs/editor/data-binding/">数据绑定 (Data Binding)</a></li><li><a href="/docs/editor/layouts/">响应式布局 (Responsive Layouts)</a></li><li><a href="/docs/editor/layouts/scrolling">滚动 (Scrolling)</a></li><li><a href="/docs/editor/layouts/n-slicing">N-切片 (N-Slicing)</a></li><li><a href="https://rive.app/blog/introducing-vector-feathering" target="_blank" rel="noreferrer">矢量羽化 (Vector Feathering)</a></li></ul></li><li><p><strong>Rive 渲染器支持</strong>： <code>rive_native</code> 将 <a href="https://rive.app/renderer" target="_blank" rel="noreferrer">Rive 渲染器 (Rive Renderer)</a> 引进到 Flutter 中。虽然您仍可以使用基于 Flutter 的渲染器（Dart/Impeller），但对于性能关键型的用例，推荐使用 Rive 渲染器。更多信息请参阅 <a href="/docs/runtimes/choose-a-renderer/overview">选择渲染器概览</a>。</p><p>某些功能（如矢量羽化）仅在 Rive 渲染器下受支持。详情请参阅 <a href="/docs/feature-support">功能支持页面</a>。</p></li></ul><hr><h2 id="入门-getting-started" tabindex="-1">入门 (Getting Started) <a class="header-anchor" href="#入门-getting-started" aria-label="Permalink to &quot;入门 (Getting Started)&quot;">​</a></h2><p><code>rive_native</code> 尚未在 GitHub 上公开，但很快会发布。目前，您可以通过运行以下命令来获取源代码和示例：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unpack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rive_native</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 解压包源代码和示例应用</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rive_native/example</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 进入示例文件夹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flutter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 创建平台文件夹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flutter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # 获取依赖项</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flutter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 # 运行示例应用</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>有关具体实现示例，请参阅 <code>rive_native/example/rive_player.dart</code> 文件。</p><hr><h2 id="平台支持-platform-support" tabindex="-1">平台支持 (Platform Support) <a class="header-anchor" href="#平台支持-platform-support" aria-label="Permalink to &quot;平台支持 (Platform Support)&quot;">​</a></h2><table tabindex="0"><thead><tr><th>平台</th><th>Flutter 渲染器</th><th>Rive 渲染器</th></tr></thead><tbody><tr><td>iOS</td><td>✅</td><td>✅</td></tr><tr><td>Android</td><td>✅</td><td>✅</td></tr><tr><td>macOS</td><td>✅</td><td>✅</td></tr><tr><td>Windows</td><td>✅</td><td>✅</td></tr><tr><td>Linux</td><td>❌</td><td>❌</td></tr><tr><td>Web</td><td>✅</td><td>✅</td></tr></tbody></table><hr><h2 id="功能支持-feature-support" tabindex="-1">功能支持 (Feature Support) <a class="header-anchor" href="#功能支持-feature-support" aria-label="Permalink to &quot;功能支持 (Feature Support)&quot;">​</a></h2><p>详情请参阅 <a href="/docs/feature-support">功能支持页面</a>。</p><hr><h2 id="故障排查-troubleshooting" tabindex="-1">故障排查 (Troubleshooting) <a class="header-anchor" href="#故障排查-troubleshooting" aria-label="Permalink to &quot;故障排查 (Troubleshooting)&quot;">​</a></h2><p>所需的原生库应在构建步骤（<code>flutter run</code> 或 <code>flutter build</code>）中自动下载。如果遇到问题，请尝试以下操作：</p><ol><li>运行 <code>flutter clean</code></li><li>运行 <code>flutter pub get</code></li><li>运行 <code>flutter run</code></li></ol><p>或者，您可以手动运行 <code>rive_native</code> 设置脚本。在 Flutter 应用的根目录下执行：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rive_native:setup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --clean</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> macos</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>这将清理 <code>rive_native</code> 设置，并下载通过 <code>--platform</code> 标志指定的平台特定库。详情请参考上方的 <strong>平台支持</strong> 部分。</p><h3 id="android" tabindex="-1">Android <a class="header-anchor" href="#android" aria-label="Permalink to &quot;Android&quot;">​</a></h3><p>如果您遇到了自动设置问题（例如 issue <a href="https://github.com/rive-app/rive-flutter/issues/555" target="_blank" rel="noreferrer">555</a> 和 <a href="https://github.com/rive-app/rive-flutter/issues/515" target="_blank" rel="noreferrer">515</a>），您可以通过在应用的 <code>gradle.properties</code> 中设置 <code>rive.native.skipSetup=true</code> 来跳过设置。</p><p>启用该设置后，您必须手动运行 <code>dart run rive_native:setup --verbose --clean --platform android</code> 来下载所需的库。</p><hr><h2 id="构建-rive-native" tabindex="-1">构建 <code>rive_native</code> <a class="header-anchor" href="#构建-rive-native" aria-label="Permalink to &quot;构建 \`rive_native\`&quot;">​</a></h2><p>默认情况下，会下载并使用预构建的原生库。如果您更愿意自己构建库，请在设置脚本中使用 <code>--build</code> 标志：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flutter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 重要</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rive_native:setup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --clean</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> macos</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p><strong>注意</strong>：构建这些库需要在您的机器上安装特定工具。后续将提供补充文档。</p></blockquote><hr><h2 id="测试-testing" tabindex="-1">测试 (Testing) <a class="header-anchor" href="#测试-testing" aria-label="Permalink to &quot;测试 (Testing)&quot;">​</a></h2><p>共享库已包含在下载/构建过程中。如果您在测试中使用 <code>rive_native</code> 时遇到问题，请联系我们寻求帮助。</p>`,37)])])}const u=i(r,[["render",n]]);export{c as __pageData,u as default};
