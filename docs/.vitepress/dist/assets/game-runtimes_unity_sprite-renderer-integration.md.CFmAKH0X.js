import{_ as i,c as n,o as a,ag as e}from"./chunks/framework.WXS6e2PS.js";const l="/docs/images/unity/spriterenderer-override-texture-property.jpg",g=JSON.parse('{"title":"在 Unity 2D 中使用 Rive","description":"","frontmatter":{"title":"在 Unity 2D 中使用 Rive","description":""},"headers":[],"relativePath":"game-runtimes/unity/sprite-renderer-integration.md","filePath":"game-runtimes/unity/sprite-renderer-integration.md"}'),p={name:"game-runtimes/unity/sprite-renderer-integration.md"};function r(t,s,h,k,E,d){return a(),n("div",null,[...s[0]||(s[0]=[e(`<p>Rive 在 Unity 中渲染到<strong>渲染纹理 (Render Texture)</strong>，这使其与支持渲染纹理的 Unity 功能兼容。这种方法提供了灵活性，但在使用 Unity 的 2D 渲染管线时，需要进行一些特定的考虑。</p><h2 id="与-sprite-renderers-协作-working-with-sprite-renderers" tabindex="-1">与 Sprite Renderers 协作 (Working with Sprite Renderers) <a class="header-anchor" href="#与-sprite-renderers-协作-working-with-sprite-renderers" aria-label="Permalink to &quot;与 Sprite Renderers 协作 (Working with Sprite Renderers)&quot;">​</a></h2><p>虽然 Rive 整体上与 Unity 协作良好，但 <strong>Sprite Renderers</strong> <a href="https://discussions.unity.com/t/how-to-apply-a-render-texture-from-a-camera-to-a-sprite-for-an-object-with-sprite-renderer/257199" target="_blank" rel="noreferrer">本身并不能最优地处理渲染纹理</a>。有两种方法可以解决这个问题：</p><ol><li><p><strong>配合 Quad 使用 Rive Texture Renderer (推荐)</strong></p><ul><li>使用 <strong>Rive Texture Renderer</strong> 组件将 Rive 图形渲染到 Quad（四边形网格）上。</li><li>不需要修改 Shader。</li><li>在 2D 和 3D 环境中表现一致。</li></ul></li><li><p><strong>针对 Sprite Renderers 的自定义 Shader 方案</strong></p><ul><li>当您需要与其他 Sprite 保持精确的排序顺序（Sorting order）时非常有用。</li><li>允许 Rive 内容在现有的 Sprite 渲染管线内工作。</li><li>需要实现一个自定义 Shader。</li></ul></li></ol><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>当使用自定义 Shader 方案配合 SpriteRenderers 时，系统不会自动支持指针输入（点击等）。这是因为 SpriteRenderers 和 SpriteColliders 不像 Quads 和 MeshColliders 那样提供 <code>textureCoords</code>（纹理坐标）。</p><p>如果您需要指针输入支持，请考虑使用推荐的 Quad 配合 RiveTextureRenderer 的方案。</p></div><p>如果您在将 Rive 图形与 <strong>Sprite Renderers</strong> 混合使用时需要维护排序顺序，可以参考以下自定义 Shader 作为起点：</p><div class="language-hlsl vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">hlsl</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Shader </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Custom/SpriteTextureOverride&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Properties</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // SpriteRenderer 在运行时会自动分配一个纹理到这里</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 我们需要声明它，但不会用到它</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        _MainTex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Default Sprite&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, 2D) = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;white&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 这是我们实际想要显示的纹理</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 可以是 RenderTexture 或任何其他纹理</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        _OverrideTexture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Override Texture&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, 2D) = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;white&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Sprite 渲染排序所必需的属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [HideInInspector] </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_Cutoff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Cutoff&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Float) = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        [HideInInspector] </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">_Color</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Color) = (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SubShader</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Tags</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;Queue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Transparent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;RenderType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Transparent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;IgnoreProjector&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;True&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;PreviewType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Plane&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Cull Off</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Lighting Off</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ZWrite Off</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Blend </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">One</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OneMinusSrcAlpha</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Pass</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            CGPROGRAM</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            #pragma</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vertex vert</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            #pragma</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fragment frag</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            #include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;UnityCG.cginc&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> appdata</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                float4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vertex : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">POSITION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                float2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uv : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TEXCOORD0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                fixed4 color : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COLOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v2f</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                float2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> uv : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TEXCOORD0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                float4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vertex : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SV_POSITION</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                fixed4 color : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COLOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }; </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            sampler2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _MainTex;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            float4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _MainTex_ST;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            sampler2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _OverrideTexture;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            float4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _OverrideTexture_ST;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            fixed4 _Color;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            v2f </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">vert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (appdata v)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                v2f o;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                o.vertex = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">UnityObjectToClipPos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v.vertex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                o.uv = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TRANSFORM_TEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(v.uv, _MainTex);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                o.color = v.color * _Color;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            fixed4 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">frag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (v2f i) : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SV_Target</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                fixed4 color = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">tex2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_OverrideTexture, i.uv);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                color.rgb *= color.a;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> color * i.color;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ENDCG</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><p>实现步骤如下：</p><ol><li>在项目中创建一个新的 Shader 文件，并粘贴上述代码。</li><li>使用该 Shader 创建一个新的材质（Material）。</li><li>将材质分配给您的 <strong>Sprite Renderer</strong>。</li><li>使用 <strong>Rive Texture Renderer</strong> 将 <code>OverrideTexture</code> 属性设置为您的渲染纹理（Render Texture）。</li></ol><p><img src="`+l+'" alt="Setting the OverrideTexture property with a Rive Texture Renderer"></p>',10)])])}const u=i(p,[["render",r]]);export{g as __pageData,u as default};
