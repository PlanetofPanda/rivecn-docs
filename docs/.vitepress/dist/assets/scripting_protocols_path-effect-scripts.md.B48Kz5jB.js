import{_ as a,c as i,o as n,ag as t}from"./chunks/framework.WXS6e2PS.js";const e="/docs/images/scripting/add-path-effect-to-stroke.png",E=JSON.parse('{"title":"路径效果脚本 (Path Effect Scripts)","description":"使用 Rive 脚本创建自定义路径效果","frontmatter":{"title":"路径效果脚本 (Path Effect Scripts)","description":"使用 Rive 脚本创建自定义路径效果"},"headers":[],"relativePath":"scripting/protocols/path-effect-scripts.md","filePath":"scripting/protocols/path-effect-scripts.md"}'),l={name:"scripting/protocols/path-effect-scripts.md"};function p(h,s,r,k,c,d){return n(),i("div",null,[...s[0]||(s[0]=[t(`<p>路径效果是实时修改和转换路径几何形状的 Rive 脚本。它们让您可以编程控制动画中路径的形状和结构，从而实现扭曲、畸变、动画和程序化修改等效果。</p><h2 id="创建路径效果-creating-a-path-effect" tabindex="-1">创建路径效果 (Creating a Path Effect) <a class="header-anchor" href="#创建路径效果-creating-a-path-effect" aria-label="Permalink to &quot;创建路径效果 (Creating a Path Effect)&quot;">​</a></h2><p><a href="/docs/scripting/creating-scripts">创建一个新脚本</a> 并选择 <strong>Path Effect</strong> 作为类型。</p><h2 id="示例-examples" tabindex="-1">示例 (Examples) <a class="header-anchor" href="#示例-examples" aria-label="Permalink to &quot;示例 (Examples)&quot;">​</a></h2><h2 id="路径效果脚本的结构-anatomy-of-a-path-effect-script" tabindex="-1">路径效果脚本的结构 (Anatomy of a Path Effect Script) <a class="header-anchor" href="#路径效果脚本的结构-anatomy-of-a-path-effect-script" aria-label="Permalink to &quot;路径效果脚本的结构 (Anatomy of a Path Effect Script)&quot;">​</a></h2><h3 id="方法-methods" tabindex="-1">方法 (Methods) <a class="header-anchor" href="#方法-methods" aria-label="Permalink to &quot;方法 (Methods)&quot;">​</a></h3><ul><li><strong>init (可选)</strong> 在创建路径效果时调用一次。用于设置初始状态。如果初始化成功，返回 true。</li><li><strong>update (必选)</strong> 进行路径变换的核心方法。接收原始的 <code>PathData</code> 并返回一个修改后的版本。这里是您操纵路径几何形状的地方。</li><li><strong>advance (可选)</strong> 每一帧都会被调用，参数为以秒为单位的经过时间。返回 true 以继续接收 advance 调用。对于随时间变化的动画效果非常有用。</li></ul><h2 id="使用-pathdata-working-with-pathdata" tabindex="-1">使用 <code>PathData</code> (Working with <code>PathData</code>) <a class="header-anchor" href="#使用-pathdata-working-with-pathdata" aria-label="Permalink to &quot;使用 \`PathData\` (Working with \`PathData\`)&quot;">​</a></h2><p><code>PathData</code> 提供了对路径绘图命令（<code>moveTo</code>、<code>lineTo</code>、<code>cubicTo</code>、<code>quadTo</code>、<code>close</code>）的访问。您可以：</p><ul><li>使用索引读取现有命令</li><li>使用 <code>#pathData</code> 获取命令计数</li><li>创建新路径并添加命令</li><li>使用 <code>contours()</code> 和 <code>measure()</code> 等测量工具进行高级操作</li></ul><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyPathEffect </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: Context,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyPathEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, context: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): boolean</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyPathEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, inPath: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PathData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): PathData</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Path.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> advance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyPathEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, seconds: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): boolean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 返回一个 Rive 用来构建路径效果实例的工厂函数。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(): PathEffect</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;MyPathEffect&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    init </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> init,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    update </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> update,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    advance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> advance,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> late</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="将脚本化路径效果添加到描边-add-the-scripted-path-effect-to-a-stroke" tabindex="-1">将脚本化路径效果添加到描边 (Add the Scripted Path Effect to a Stroke) <a class="header-anchor" href="#将脚本化路径效果添加到描边-add-the-scripted-path-effect-to-a-stroke" aria-label="Permalink to &quot;将脚本化路径效果添加到描边 (Add the Scripted Path Effect to a Stroke)&quot;">​</a></h2><p>选择或向形状添加描边：</p><ol><li>打开“选项 (Options)”菜单。</li><li>选择“效果 (Effects)”标签，点击 &#39;+&#39; 添加效果。</li><li>在脚本效果 (Script Effects) 菜单项下找到您的效果。</li><li>您定义的任何输入项都将显示并可以在此处进行编辑。</li></ol><p><img src="`+e+'" alt="将路径效果添加到描边"></p><h2 id="添加输入-adding-inputs" tabindex="-1">添加输入 (Adding Inputs) <a class="header-anchor" href="#添加输入-adding-inputs" aria-label="Permalink to &quot;添加输入 (Adding Inputs)&quot;">​</a></h2><p>请参阅 <a href="/docs/scripting/script-inputs">脚本输入 (Script Inputs)</a>。</p>',17)])])}const g=a(l,[["render",p]]);export{E as __pageData,g as default};
