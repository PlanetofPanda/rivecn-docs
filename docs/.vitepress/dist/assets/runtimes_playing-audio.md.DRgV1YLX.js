import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.WXS6e2PS.js";const g=JSON.parse('{"title":"播放音频 (Playing Audio)","description":"播放 Rive 音频事件","frontmatter":{"title":"播放音频 (Playing Audio)","description":"播放 Rive 音频事件"},"headers":[],"relativePath":"runtimes/playing-audio.md","filePath":"runtimes/playing-audio.md"}'),l={name:"runtimes/playing-audio.md"};function p(t,s,h,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[e(`<p>要了解有关如何将音频添加到 Rive 文件的更多信息，请参阅：<a href="/docs/editor/events/audio-events">音频事件 (Audio Events)</a>。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>在 Web 端，某些浏览器会限制音频播放，直到网页被交互。这适用于任何音频，不只是 Rive 音频。 网页在播放声音之前需要接收某种交互（触摸/点击）。这种交互可以是浏览器上的任何操作，不一定必须是 Rive 特定的交互。</p></div><h2 id="嵌入资源-embedded-assets" tabindex="-1">嵌入资源 (Embedded Assets) <a class="header-anchor" href="#嵌入资源-embedded-assets" aria-label="Permalink to &quot;嵌入资源 (Embedded Assets)&quot;">​</a></h2><p>嵌入资源不需要额外的工作即可播放音频。但在某些平台上，可能需要额外的工作来设置音频混音、避让 (ducking) 或以其他方式更改音频播放的全局设置。见下文的 <strong>音频设置</strong>。</p><h2 id="引用资源-referenced-assets" tabindex="-1">引用资源 (Referenced Assets) <a class="header-anchor" href="#引用资源-referenced-assets" aria-label="Permalink to &quot;引用资源 (Referenced Assets)&quot;">​</a></h2><p>引用资源需要多一点工作来播放音频。音频仍将自动播放，但在 Rive 运行时尝试播放音频时必须已加载音频文件。更多信息请参阅 <a href="/docs/runtimes/loading-assets">资源加载 (Loading Assets)</a>。</p><h3 id="apple" tabindex="-1">Apple <a class="header-anchor" href="#apple" aria-label="Permalink to &quot;Apple&quot;">​</a></h3><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 加载一个引用的音频文件，其名称和扩展名与编辑器中添加的一致</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RiveViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my_rive_file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { asset, data, factory </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        guard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> audioAsset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RiveAudioAsset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        guard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Bundle.main.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            forResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: audioAsset.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uniqueName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            withExtension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: audioAsset.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fileExtension</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;未能从 bundle 加载资产 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(asset.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uniqueFilename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">())</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        guard</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">contentsOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: url) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;未能从 bundle 加载 </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\\(url)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        audioAsset.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">audio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(factory.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">decodeAudio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="音频设置-audio-settings" tabindex="-1">音频设置 (Audio Settings) <a class="header-anchor" href="#音频设置-audio-settings" aria-label="Permalink to &quot;音频设置 (Audio Settings)&quot;">​</a></h2><h3 id="apple-1" tabindex="-1">Apple <a class="header-anchor" href="#apple-1" aria-label="Permalink to &quot;Apple&quot;">​</a></h3><p>在 iOS 上，播放音频将遵循您的 <code>AVAudioSession</code> 共享实例设置。有关更多信息，请参阅 Apple 关于 <a href="https://developer.apple.com/documentation/avfaudio/avaudiosession" target="_blank" rel="noreferrer"><code>AVAudioSession</code></a> 的文档。使用此功能，您可以选择混音、避让音频等。如果您希望确保所有 Rive 音频都以正确的设置播放，可以在应用生命周期的早期更新您的共享实例。</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 示例：忽略静音开关，并与其他音频混音</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> category: AVAudioSession.Category </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .playback</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options: AVAudioSession.CategoryOptions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [.mixWithOthers]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    AVAudioSession.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">sharedInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">setCategory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(category, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: options)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="设置音量-setting-volume" tabindex="-1">设置音量 (Setting Volume) <a class="header-anchor" href="#设置音量-setting-volume" aria-label="Permalink to &quot;设置音量 (Setting Volume)&quot;">​</a></h2><p>画板能够设置其音量。父画板将设置所有组件实例的音量；然而，设置组件的音量 <strong>不会</strong> 更新父画板的音量。</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将当前画板的音量设置为 50%</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> viewModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RiveViewModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">fileName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my_rive_file&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">viewModel.riveModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.volume </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div>`,15)])])}const o=i(l,[["render",p]]);export{g as __pageData,o as default};
