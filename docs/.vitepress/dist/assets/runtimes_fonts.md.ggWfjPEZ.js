import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.WXS6e2PS.js";const o=JSON.parse('{"title":"字体 (Fonts)","description":"在运行时动态加载和替换字体。","frontmatter":{"title":"字体 (Fonts)","description":"在运行时动态加载和替换字体。"},"headers":[],"relativePath":"runtimes/fonts.md","filePath":"runtimes/fonts.md"}'),t={name:"runtimes/fonts.md"};function p(e,s,h,k,r,E){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h2 id="在运行时切换字体-swapping-fonts-at-runtime" tabindex="-1">在运行时切换字体 (Swapping Fonts at Runtime) <a class="header-anchor" href="#在运行时切换字体-swapping-fonts-at-runtime" aria-label="Permalink to &quot;在运行时切换字体 (Swapping Fonts at Runtime)&quot;">​</a></h2><p>字体可以在运行时动态加载。这允许您在不增加导出的 .riv 文件大小的情况下实现 Rive 内容的本地化。更多信息请参见 <a href="/docs/runtimes/loading-assets">资源加载 (Loading Assets)</a>。</p><h2 id="备用字体-fallback-fonts" tabindex="-1">备用字体 (Fallback Fonts) <a class="header-anchor" href="#备用字体-fallback-fonts" aria-label="Permalink to &quot;备用字体 (Fallback Fonts)&quot;">​</a></h2><p>在渲染文本时，并非所有字符（字形）都可以在当前活动字体中找到。这通常发生在以下情况：</p><ul><li>使用不支持所有语言或 Unicode 范围的自定义字体</li><li>嵌入的字体是源字体的子集</li><li>用户生成或动态文本包含意外字符</li></ul><p>为了避免字形缺失或不可见，某些平台支持备用字体。当主字体无法渲染特定字形时，会自动使用备用字体。这些通常是系统字体，通常提供广泛的 Unicode 覆盖。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p><strong>Web 端不支持</strong> 备用字体。</p><p>由于安全原因，浏览器不允许 canvas 访问本地系统文件（包括字体）。因此，只能使用显式提供给 Rive 的字体。</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>在 iOS 和 Android 上，为备用字体指定的字体大小会被忽略。平台会选择最匹配运行时文本运行（text run）样式和动画的系统字体。</p></div><h3 id="apple" tabindex="-1">Apple <a class="header-anchor" href="#apple" aria-label="Permalink to &quot;Apple&quot;">​</a></h3><p>从 v6.1 版本开始，在 iOS 和 macOS 上可以使用各种备用选项。Apple 运行时提供了根据请求样式选择系统字体的辅助工具。此外，可以直接使用 <code>UIFont</code> / <code>NSFont</code>。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>如果未注册任何备选字体，将使用常规粗细和宽度的默认系统字体。</p></div><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在应用生命周期的早期，调用类似以下的代码：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RiveFont.fallbackFonts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用默认系统字体</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">design</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .default, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .bold, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .expanded), </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 使用加粗、宽体系统字体</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    UIFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者，您可以在运行时根据样式提供不同的字体</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>从 v6.4 版本开始，在 iOS 和 macOS 上，您可以利用更动态的基于回调的选择 API，根据文本运行中设置的样式，为任何缺失字符返回各种字体。</p><div class="language-swift vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">swift</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 与类似的 fallbackFonts API 一样，您可以使用 Rive 辅助类型</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或原生 UIFont/NSFont 类型</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RiveFont.fallbackFontsCallback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { style </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> style.weight {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .thin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .thin),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            UIFont.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">systemFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ofSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .thin)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .bold</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .bold),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            UIFont.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">systemFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ofSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .bold)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        default:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            UIFont.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">systemFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ofSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者，您也可以使用原始粗细 (raw weight) 来返回各种字体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RiveFont.fallbackFontsCallback </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { style </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> style.rawWeight {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .thin),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            UIFont.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">systemFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ofSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .thin)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        case</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 700</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .bold),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            UIFont.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">systemFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ofSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: .bold)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        default:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            RiveFallbackFontDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            UIFont.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">systemFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ofSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="android" tabindex="-1">Android <a class="header-anchor" href="#android" aria-label="Permalink to &quot;Android&quot;">​</a></h3><p>从 v9.12.0 版本开始，Android 上可以使用各种备用字体选项。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>如果未注册备用字体，将使用常规粗细（400, NORMAL）和正常样式的默认系统字体（&quot;sans-serif&quot;）。</p></div><p><code>Fonts</code> 类提供了处理和自定义字体的方法，包括检索系统字体、定义字体选项以及根据特定特征查找备用字体。</p><h4 id="_1-设置备用字体" tabindex="-1">1. 设置备用字体 <a class="header-anchor" href="#_1-设置备用字体" aria-label="Permalink to &quot;1. 设置备用字体&quot;">​</a></h4><p>从 v9.12.0 开始，运行时提供了一个新的 API，通过扩展 <code>FontFallbackStrategy</code> 接口来将缺失的字体与特定的粗细进行匹配。</p><p>该接口包含一个方法：</p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(weight: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Fonts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.Weight): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FontBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>实现者需要覆盖此方法。用户的实现必须接着通过 <code>FontFallbackStrategy.stylePicker</code> 设置为当前的备选策略。</p><p><strong>示例：</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FontFallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AppCompatActivity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FontFallbackStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(savedInstanceState: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Bundle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onCreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(savedInstanceState)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 设置备选策略</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        FontFallbackStrategy.stylePicker </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    override</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(weight: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Fonts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.Weight): </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FontBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desiredWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> weight.weight</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fonts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> listOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FontOpts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                familyName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sans-serif&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> desiredWeight) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 查找匹配粗细的字体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 非拉丁语 Unicode 备选</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FontOpts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NotoSansThai-Regular.ttf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mapNotNull</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 过滤掉系统中找不到的字体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            FontHelper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFallbackFontBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(it)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>该方法返回 <code>FontBytes</code> (<code>ByteArray</code>) 列表。运行时会按照先进先出 (FIFO) 的顺序尝试使用列表中的字体匹配字符。</p><p>备用字体也可以使用 <code>Rive.setFallbackFont()</code> 设置，并在 <code>Fonts.FontOpts</code> 中定义可选的字体偏好。只有在尝试了 <code>FontFallbackStrategy.getFont()</code> 返回的字体后，才会尝试这些字体。</p><h4 id="_2-fonts-fontopts-字体选项" tabindex="-1">2. Fonts.FontOpts - 字体选项 <a class="header-anchor" href="#_2-fonts-fontopts-字体选项" aria-label="Permalink to &quot;2. Fonts.FontOpts - 字体选项&quot;">​</a></h4><p>定义选择备用字体时的字体特征。</p><ul><li><strong>参数</strong><ul><li><code>familyName</code>: 字体系列名称 (例如 &quot;Roboto&quot;, &quot;NotoSansThai-Regular.ttf&quot;)。默认为 <code>null</code>。</li><li><code>lang</code>: 可选的语言规范。默认为 <code>null</code>。</li><li><code>weight</code>: 使用 <code>Fonts.Weight</code> 的字体粗细 (例如 <code>Fonts.Weight.NORMAL</code>, <code>Fonts.Weight.BOLD</code>)。默认为 <code>Weight.NORMAL</code>。</li><li><code>style</code>: 字体样式，<code>Fonts.Font.STYLE_NORMAL</code> 或 <code>Fonts.Font.STYLE_ITALIC</code>。默认为 <code>STYLE_NORMAL</code>。</li></ul></li><li><strong>默认示例</strong></li></ul><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultFontOpts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.FontOpts.DEFAULT</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_3-检索备用字体" tabindex="-1">3. 检索备用字体 <a class="header-anchor" href="#_3-检索备用字体" aria-label="Permalink to &quot;3. 检索备用字体&quot;">​</a></h4><p>使用 <code>FontHelper.getFallbackFont()</code> 根据指定选项查找合适的备用字体。返回 <code>Fonts.Font</code> 对象，如果未找到匹配项则返回 <code>null</code>。</p><p><strong>示例：</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fontOpts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FontOpts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(familyName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Roboto&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.Weight.BOLD)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fallbackFont </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FontHelper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFallbackFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fontOpts)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_4-获取字体文件和字节" tabindex="-1">4. 获取字体文件和字节 <a class="header-anchor" href="#_4-获取字体文件和字节" aria-label="Permalink to &quot;4. 获取字体文件和字节&quot;">​</a></h4><ul><li><code>FontHelper.getFontFile(font: Fonts.Font)</code>: 检索指定字体的文件。</li><li><code>FontHelper.getFontBytes(font: Fonts.Font)</code>: 读取字体文件并返回其字节。</li></ul><p><strong>示例：</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fontFile </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FontHelper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFontFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fallbackFont)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fontBytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FontHelper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getFontBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fallbackFont)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_5-fonts-weight-字体粗细" tabindex="-1">5. Fonts.Weight - 字体粗细 <a class="header-anchor" href="#_5-fonts-weight-字体粗细" aria-label="Permalink to &quot;5. Fonts.Weight - 字体粗细&quot;">​</a></h4><p>表示字体粗细，允许 0 到 1000 之间的值。</p><ul><li><strong>预定义粗细</strong><ul><li><code>Fonts.Weight.NORMAL</code> (400)</li><li><code>Fonts.Weight.BOLD</code> (700)</li></ul></li></ul><p><strong>示例：</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> normalWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.Weight.NORMAL</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.Weight.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fromInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_6-fonts-style-字体样式" tabindex="-1">6. Fonts.Style - 字体样式 <a class="header-anchor" href="#_6-fonts-style-字体样式" aria-label="Permalink to &quot;6. Fonts.Style - 字体样式&quot;">​</a></h4><p>表示字体样式，允许 &quot;normal&quot; (常规) 和 &quot;italic&quot; (斜体)。</p><ul><li><strong>预定义样式</strong><ul><li><code>Fonts.Font.STYLE_NORMAL</code></li><li><code>Fonts.Font.STYLE_ITALIC</code></li></ul></li></ul><p><strong>示例：</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> normalStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.Font.STYLE_NORMAL</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> italicStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fonts.Font.STYLE_ITALIC</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_7-获取系统字体" tabindex="-1">7. 获取系统字体 <a class="header-anchor" href="#_7-获取系统字体" aria-label="Permalink to &quot;7. 获取系统字体&quot;">​</a></h4><ul><li><code>FontHelper.getSystemFonts()</code>: 返回所有可用系统字体系列的映射。</li></ul><p><strong>示例：</strong></p><div class="language-kotlin vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> systemFonts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FontHelper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSystemFonts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,53)])])}const g=i(t,[["render",p]]);export{o as __pageData,g as default};
