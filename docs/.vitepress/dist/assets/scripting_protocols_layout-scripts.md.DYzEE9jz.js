import{_ as i,c as a,o as e,ag as n}from"./chunks/framework.WXS6e2PS.js";const c=JSON.parse('{"title":"布局脚本 (Layout Scripts)","description":"","frontmatter":{"title":"布局脚本 (Layout Scripts)","description":""},"headers":[],"relativePath":"scripting/protocols/layout-scripts.md","filePath":"scripting/protocols/layout-scripts.md"}'),t={name:"scripting/protocols/layout-scripts.md"};function l(p,s,r,h,k,o){return e(),a("div",null,[...s[0]||(s[0]=[n(`<p>布局脚本扩展了 <a href="/docs/scripting/protocols/node-scripts">节点脚本 (Node Scripts)</a> 的行为，让您可以编程控制布局组件。它们允许您测量、设定大小以及对布局几何形状的变化做出反应。它们非常适合构建自定义布局行为，如瀑布流网格、轮播图、间距逻辑等。</p><h2 id="示例-examples" tabindex="-1">示例 (Examples) <a class="header-anchor" href="#示例-examples" aria-label="Permalink to &quot;示例 (Examples)&quot;">​</a></h2><h2 id="将布局脚本添加到布局-adding-a-layout-script-to-a-layout" tabindex="-1">将布局脚本添加到布局 (Adding a Layout Script to a Layout) <a class="header-anchor" href="#将布局脚本添加到布局-adding-a-layout-script-to-a-layout" aria-label="Permalink to &quot;将布局脚本添加到布局 (Adding a Layout Script to a Layout)&quot;">​</a></h2><ol><li>向场景中添加一个新的 <a href="/docs/editor/layouts/layouts-overview">布局 (Layout)</a>。</li><li><a href="/docs/scripting/creating-scripts">创建一个新脚本</a> 并选择 <strong>Layout</strong> 作为类型。</li><li>将您的脚本添加为布局的子节点。</li></ol><h2 id="生命周期-lifecycle" tabindex="-1">生命周期 (Lifecycle) <a class="header-anchor" href="#生命周期-lifecycle" aria-label="Permalink to &quot;生命周期 (Lifecycle)&quot;">​</a></h2><p>布局脚本增加了两个额外的生命周期函数：</p><ul><li><code>measure(self): Vec2D</code> — 可选</li><li><code>resize(self, size: Vec2D)</code> — 必选</li></ul><h3 id="测量-measure" tabindex="-1">测量 (Measure) <a class="header-anchor" href="#测量-measure" aria-label="Permalink to &quot;测量 (Measure)&quot;">​</a></h3><p><code>Measure</code> 允许您的脚本为布局提议一个理想的大小。除非被 Fit 规则覆盖，否则 Rive 将使用该值。</p><p><code>Measure</code> 仅对 Fit 类型为 Hug (抱紧) 的布局有效。</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> measure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): Vec2D</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  -- 始终声明此布局希望的大小为 100×100</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vec2D.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">xy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="调整大小-resize" tabindex="-1">调整大小 (Resize) <a class="header-anchor" href="#调整大小-resize" aria-label="Permalink to &quot;调整大小 (Resize)&quot;">​</a></h3><p>每当布局从其父级或从您的 <code>measure</code> 函数接收到新的大小时，<code>Resize</code> 就会运行。在这里，您可以定位或更新子节点、重新计算流向，或对容器的变化做出反应。</p><div class="language-lua vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 每当布局调整大小时调用。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MyLayout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, size: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Vec2D</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;新大小：&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, size.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;y:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, size.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div>`,14)])])}const u=i(t,[["render",l]]);export{c as __pageData,u as default};
