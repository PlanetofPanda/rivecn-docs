import{_ as a,c as i,o as n,ag as e}from"./chunks/framework.WXS6e2PS.js";const t="/docs/images/game-runtimes/unity/03086bad-8cd9-4cfc-8d23-03579ff93a00.webp",g=JSON.parse('{"title":"布局 (Layouts)","description":"在 Unity 中控制 Rive 动画的布局","frontmatter":{"title":"布局 (Layouts)","description":"在 Unity 中控制 Rive 动画的布局"},"headers":[],"relativePath":"game-runtimes/unity/layouts.md","filePath":"game-runtimes/unity/layouts.md"}'),l={name:"game-runtimes/unity/layouts.md"};function p(r,s,o,h,k,c){return n(),i("div",null,[...s[0]||(s[0]=[e(`<p>import LegacyApiNotice from &#39;/snippets/unity/legacy-api-notice.mdx&#39;;</p><p>有关 Rive 布局的更多信息，请参阅<a href="/docs/runtimes/layout">运行时文档</a>。</p><p><strong><a href="/docs/runtimes/layout">布局 (Layout)</a></strong></p><pre><code>Rive 提供了多种方式来控制动画在用于显示它们的画布或视图中的布局方式。Rive 允许您控制渲染内容的适配模式（fit）、对齐方式（alignment）和偏移量（offset）。
</code></pre><h2 id="适配与对齐-fit-and-alignment" tabindex="-1">适配与对齐 (Fit and Alignment) <a class="header-anchor" href="#适配与对齐-fit-and-alignment" aria-label="Permalink to &quot;适配与对齐 (Fit and Alignment)&quot;">​</a></h2><h3 id="组件-api-components" tabindex="-1">组件 API (Components) <a class="header-anchor" href="#组件-api-components" aria-label="Permalink to &quot;组件 API (Components)&quot;">​</a></h3><p>使用 <strong>Rive Widget</strong> 组件，您可以从 <strong>Fit</strong> 和 <strong>Alignment</strong> 选项列表中进行选择。</p><p><img src="`+t+`" alt="The Fit and Alignment dropdowns in the Unity inspector"></p><h3 id="旧版-api-legacy-api" tabindex="-1">旧版 API (Legacy API) <a class="header-anchor" href="#旧版-api-legacy-api" aria-label="Permalink to &quot;旧版 API (Legacy API)&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>旧版 API 通知</strong></p></div><p>适配和对齐可以通过 <strong>Rive.Renderer</strong> 的 <code>.Align()</code> 方法进行控制：</p><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Fit</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fit.contain;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Alignment</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> alignment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Alignment.Center;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RenderTexture</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> renderTexture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Rive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Renderer</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> m_riveRenderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m_renderQueue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Rive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RenderQueue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(renderTexture);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m_riveRenderer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m_renderQueue.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Renderer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (m_artboard </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> renderTexture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     m_riveRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Align</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fit, alignment, m_artboard);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     m_riveRenderer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Draw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m_artboard);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="响应式布局-responsive-layout" tabindex="-1">响应式布局 (Responsive Layout) <a class="header-anchor" href="#响应式布局-responsive-layout" aria-label="Permalink to &quot;响应式布局 (Responsive Layout)&quot;">​</a></h2><p><code>Layout</code> 适配模式允许您显示具有内置响应式行为的可调尺寸画板，这些行为直接在图形中配置。在运行时设置 <strong>Fit</strong> 类型为 <strong>Layout</strong>，画板将自动调整大小。此外，您还可以提供一个 <strong>Layout Scale Factor</strong>（布局缩放因子）来进一步调整内容的缩放。</p><h3 id="组件-api-components-1" tabindex="-1">组件 API (Components) <a class="header-anchor" href="#组件-api-components-1" aria-label="Permalink to &quot;组件 API (Components)&quot;">​</a></h3><p>当 <strong>Fit</strong> 设置为 <code>Layout</code> 时，<strong>Rive Widget</strong> 会执行以下操作：</p><p>• 从其 RectTransform 中测量可用空间。</p><p>• 根据 <code>Layout Scaling Mode</code>（布局缩放模式）和 <code>Layout Scale Factor</code> 计算新的画板尺寸。</p><p>• 动态调整画板大小以匹配计算出的维度。</p><h2 id="布局缩放模式-layout-scaling-modes" tabindex="-1">布局缩放模式 (Layout Scaling Modes) <a class="header-anchor" href="#布局缩放模式-layout-scaling-modes" aria-label="Permalink to &quot;布局缩放模式 (Layout Scaling Modes)&quot;">​</a></h2><p>您可以从以下三种布局缩放模式中进行选择：</p><p><strong>Reference Artboard Size (默认)</strong></p><p>• 根据画板的原始（参考）尺寸进行等比缩放，在不同分辨率下保持相对一致的大小。</p><p>• 画板始终表现为&quot;相对于屏幕而言的大小相同&quot;，保持一致的、与分辨率无关的视觉效果。</p><p>• 使用 &quot;Layout Scale Factor&quot; 可以微调或放大/缩小该比例（1x 为基准）。</p><p><strong>Constant Pixel Size (固定像素大小)</strong></p><p>• 无论屏幕分辨率或 DPI 如何，画板都保持其确定的像素大小。</p><p>• Layout Scale Factor 是应用于原始画板像素大小的直接乘数。</p><p>• 在低分辨率屏幕上画板看起来会较大，而在高分辨率屏幕上看起来会较小。</p><p><strong>Constant Physical Size (固定物理大小)</strong></p><p>• 尝试根据 DPI 缩放在不同设备上保持画板的物理尺寸相近。</p><p>• DPI 较高的设备将应用较大的像素缩放，从而使画板在不同设备间的物理尺寸保持一致。</p><p>• 在 RiveWidget 中需要配置两个额外属性：</p><pre><code>- Fallback DPI：当 \`Screen.dpi\` 不可用时使用的备用值。
- Reference DPI：UI 设计的基准 DPI（例如，如果您针对标准桌面端，则设为 96）。
</code></pre><h2 id="布局缩放因子-layout-scale-factor" tabindex="-1">布局缩放因子 (Layout Scale Factor) <a class="header-anchor" href="#布局缩放因子-layout-scale-factor" aria-label="Permalink to &quot;布局缩放因子 (Layout Scale Factor)&quot;">​</a></h2><p>无论选择哪种 <code>Layout Scaling Mode</code>，您都可以通过 <code>Layout Scale Factor</code> 进一步缩放画板。1.0 表示没有额外缩放；大于 1.0 的值会放大画板，小于 1.0 的值会缩小画板。</p><p>在实践中，即便选定了特定的缩放模式，此因子也能为您提供灵活调整的空间。例如，如果您发现移动端上的内容略大，可以将 Layout Scale Factor 设置为 0.9（即缩放后尺寸的 90%）。</p><h3 id="旧版-api-legacy-api-1" tabindex="-1">旧版 API (Legacy API) <a class="header-anchor" href="#旧版-api-legacy-api-1" aria-label="Permalink to &quot;旧版 API (Legacy API)&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>旧版 API 通知</strong></p></div><p><strong>在自定义脚本中实现 Layout</strong></p><p>在自定义脚本中实现 <code>Fit.Layout</code> 时，请考虑以下几个方面：</p><ol><li><p><strong>屏幕分辨率与缩放</strong></p><ul><li>监听屏幕分辨率的变化。</li><li>处理 DPI。</li><li>为不同显示密度实现正确的缩放。</li></ul></li><li><p><strong>输入处理</strong></p><ul><li>将输入坐标转换（Transform）以匹配已缩放的布局。</li><li>在处理触摸/鼠标输入时考虑不同的 DPI。</li><li>考虑对已缩放元素进行点击测试（hit-testing）的调整。</li></ul></li></ol><p>此 <a href="https://github.com/rive-app/rive-unity/blob/main/examples/basic/Assets/GameRuntime/RiveScreen.cs" target="_blank" rel="noreferrer">脚本</a> 展示了在考虑上述各点的情况下，如何实现对 <code>Fit.Layout</code> 支持的一种方式。</p>`,43)])])}const u=a(l,[["render",p]]);export{g as __pageData,u as default};
